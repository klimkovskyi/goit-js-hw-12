{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst axiosMetod = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '13983728-c7bbdcf2d20cfa49f01a0b8c6',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  }\n});\n\n\nexport async function searchImage(searchValue, page = 1) {\n  const { data } = await axiosMetod.get('', {\n    params: {\n      q: searchValue,\n      page: page,\n      per_page: 15,\n    }\n  });\n\n  return data;\n}\n","export function renderImage(data) {\n    return data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n                <ul class=\"wrapper\">\n                    <li>Likes<span>${likes}</span></li>\n                    <li>Views<span>${views}</span></li>\n                    <li>Comments<span>${comments}</span></li>\n                    <li>Downloads<span>${downloads}</span></li>\n                </ul>\n            </a>\n        </li>\n    `).join('');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {searchImage} from './js/pixabay-api';\nimport {renderImage} from './js/render-functions';\n\nconst formEl = document.querySelector('.search-form');\nconst container = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.js-btn-load');\n\nconst lightbox = new SimpleLightbox ('.gallery-list a', {\n        animationSpeed: 200,\n        animationSlide: true,\n        disableScroll: false,\n        history: false,\n        captionsData: 'alt',\n        captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet perPage = 15;\nlet intputValue = '';\nlet totalImages = 0;\n\nbtnLoadMore.style.display = 'none';\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  intputValue = event.target.elements.search.value.trim();\n  currentPage = 1;\n\n  container.innerHTML = '';\n  \n\n  if (!intputValue) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    return;\n  }\n\n  loader.classList.remove('hidden');\n  loader.style.display = 'block';\n  btnLoadMore.style.display = 'none';\n  \n  try {\n    const data = await searchImage(intputValue, currentPage);\n    if (!data.total) {\n        iziToast.error({\n        title: 'Error',\n        message:\n        'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        });\n        \n        return loader.style.display = 'none';\n        }\n    else {\n        totalImages = data.totalHits;\n        const markup = renderImage(data.hits);\n        container.innerHTML = markup;\n        lightbox.refresh();\n\n        if (totalImages >= currentPage * perPage) {\n            btnLoadMore.style.display = 'block';\n        }\n    }\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n  } catch (error) {\n        console.error('Error searching images:', error.message);\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n  }\n}); \n\n\nbtnLoadMore.addEventListener('click', async e => {\n    currentPage += 1;\n  loader.classList.remove('hidden');\n  loader.style.display = 'block';\n\n    if (totalImages <= currentPage * perPage) {\n        btnLoadMore.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        });\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    }\n\n    try {\n        const data = await searchImage(intputValue, currentPage);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            const markup = renderImage(data.hits);\n            container.insertAdjacentHTML(\"beforeend\", markup)\n            lightbox.refresh();\n\n            const galleryItem = document.querySelector('.gallery-item');\n            const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n            window.scrollBy({\n                top: galleryItemHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    } catch (error) {\n        console.error('Error loading more images:', error.message);\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    }\n});\n"],"names":["axiosMetod","axios","searchImage","searchValue","page","data","renderImage","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","container","loader","btnLoadMore","lightbox","SimpleLightbox","currentPage","perPage","intputValue","totalImages","event","iziToast","markup","error","e","galleryItemHeight"],"mappings":"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"}